#
# SPDX-FileCopyrightText: Copyright (c) 1993-2025 NVIDIA CORPORATION & AFFILIATES. All rights reserved.
# SPDX-License-Identifier: Apache-2.0
#

[supervisord]
nodaemon=true
user=root
logfile=/var/log/supervisor/supervisord.log
pidfile=/var/run/supervisord.pid
loglevel=info

[program:llm-service]
command=/opt/conda/bin/conda run --no-capture-output -n trellis python -u /app/nim_llm/run_llama_local.py
directory=/app
autostart=true
autorestart=true
startretries=3
stderr_logfile=/var/log/supervisor/llm-service.err.log
stdout_logfile=/var/log/supervisor/llm-service.out.log
priority=1

[program:trellis-service]
command=/opt/conda/bin/conda run --no-capture-output -n trellis python -u /app/nim_trellis/run_trellis_local.py
directory=/app
autostart=true
autorestart=true
startretries=3
stderr_logfile=/var/log/supervisor/trellis-service.err.log
stdout_logfile=/var/log/supervisor/trellis-service.out.log
priority=2

[program:gradio-app]
command=/opt/conda/bin/conda run --no-capture-output -n trellis python -u /app/app.py
directory=/app
autostart=true
autorestart=true
startretries=10
stderr_logfile=/var/log/supervisor/gradio-app.err.log
stdout_logfile=/var/log/supervisor/gradio-app.out.log
startsecs=30
priority=3
